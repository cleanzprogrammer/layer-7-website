<!DOCTYPE html>
<html>
  <body>
    <h1>Get hands on with JavaScript’s Fetch API</h1>
    <p>
      Write your requests in the script and watch the console and network logs.
    </p>

    <p>My ip address is:</p>
    <p></p>
    <p id="ip"></p>

    <p>My City is:</p>
    <p></p>
    <p id="city"></p>

    <p>My Country is:</p>
    <p></p>
    <p id="country"></p>

    <p>My isp is:</p>
    <p></p>
    <p id="isp"></p>

    <p>My weather at my location is:</p>
    <p></p>
    <p id="weather">   </p> degrees °C

    <p>My weather at my location is:</p>
    <p></p>
    <p id="weathertemp">  </p>  degrees °F
    



    <script>
	async function apis() {
		const ipf = await fetch("https://api.ipify.org/?format=json");
		const ip = await ipf.json();
		document.getElementById("ip").innerHTML = ip.ip;
		console.log(ip);

		const response = await fetch(
			"https://ip-geolocation-ipwhois-io.p.rapidapi.com/json/?ip=" + ip.ip,
			{
				method: "GET",
				headers: {
					"x-rapidapi-host": "ip-geolocation-ipwhois-io.p.rapidapi.com",
					"x-rapidapi-key":
						"044e648b19mshfece6f865ead2b3p1a1a7ajsn036a4345378f",
				},
			}
		);
		const location = await response.json();

		document.getElementById("city").innerHTML = location.city;
		document.getElementById("country").innerHTML = location.country;
		document.getElementById("weather").innerHTML = location.weather;
		console.log(location);

		const responseW = await fetch(
			`https://api.openweathermap.org/data/2.5/weather?q=${location.city},${location.country}&appid=01824adfd34c017485e9252b08293221`,
			{
				method: "GET",
			}
		);
		const weather = await responseW.json();
		console.log(weather);
		document.getElementById("weather").innerHTML = `${weather.weather[0].main}, ${weather.weather[0].description}`;
	}

	apis();  
    </script>
    </p>
  </body>
</html>
